/*

 Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
'use strict';(function(w){function m(){this.c={};this.a=this.a.bind(this);this.b=this.b.bind(this);this.g=new k(this.a,this.b)}function k(a,b){this.c={};this.h=a;this.D=b;this.a=0;this.b={}}function q(a){return a.nodeType===Node.ELEMENT_NODE&&x.call(a,"link[rel=import]")}function E(a,b){F.forEach(function(c){var d=a.attributes[c],e=d&&d.value;e&&0>e.search(/({{|\[\[)/)&&(d.value="style"===c?l.v(e,b):l.l(e,b))})}function y(a,b){a=a.querySelectorAll("template");for(var c=0;c<a.length;c++){var d=b,e=
a[c].content;if(e){for(var f=e.querySelectorAll("style, form[action], [src], [href], [url], [style]"),h=0;h<f.length;h++){var g=f[h];"style"==g.localName?l.w(g,d):E(g,d)}y(e,d)}}}function G(){for(var a=document.querySelectorAll("import-content script"),b=0,c=a.length,d;b<c&&(d=a[b]);b++){var e=document.createElement("script");e.textContent=d.textContent;d.src&&e.setAttribute("src",d.getAttribute("src"));d.parentNode.replaceChild(e,d);r=e;p(e).then(function(a){a===r&&(r=null)})}}function p(a){return new Promise(function(b){H(a)?
b(a):(a.addEventListener("load",function(){a.a=!0;a.m=!1;b(a)}),a.addEventListener("error",function(){a.a=!0;a.m=!0;b(a)}))})}function H(a){if(!a.a)if(t&&q(a)&&a.import&&"loading"!==a.import.readyState)n.log&&console.log("delayed flagging of import loaded",a),a.a=!0;else if(z&&"style"===a.localName){var b=!1;if(-1==a.textContent.indexOf("@import"))b=!0;else if(a.sheet)for(var b=!0,c=a.sheet.cssRules,d=0,e=c?c.length:0;d<e&&b;d++)c[d].type===CSSRule.IMPORT_RULE&&(b=!!c[d].styleSheet);b&&(n.log&&console.log("delayed flagging of style w/ imports loaded",
a),a.a=!0)}return a.a}function A(a,b){b=b||document;B(function(){I(a,b)},b)}function B(a,b){if("complete"===b.readyState||b.readyState===C)a&&a();else{var c=function(){if("complete"===b.readyState||b.readyState===C)b.removeEventListener("readystatechange",c),B(a,b)};b.addEventListener("readystatechange",c)}}function I(a,b){var c=b.querySelectorAll("link[rel=import]"),c=Array.prototype.slice.call(c).filter(function(a){return!x.call(a,"import-content link[rel=import]")});Promise.all(c.map(p)).then(function(){var b=
[],e=[];c.forEach(function(a){(a.m?e:b).push(a)});a({allImports:c,loadedImports:b,errorImports:e})})}var t="import"in document.createElement("link"),n={C:!1,log:!1},r=null;Object.defineProperty(document,"_currentScript",{get:function(){return r||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null)},configurable:!0});document.baseURI||Object.defineProperty(document,"baseURI",{get:function(){var a=document.querySelector("base");return a?a.href:
window.location.href},configurable:!0});(function(){function a(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=document.createEvent("CustomEvent");d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail);return d}if("function"===typeof window.CustomEvent)return!1;a.prototype=window.Event.prototype;window.CustomEvent=a})();var J=/(^\/)|(^#)|(^[\w-\d]*:)/,K=/(url\()([^)]*)(\))/g,L=/(@import[\s]+(?!url\())([^;]*)(;)/g,l={w:function(a,b){a.textContent=l.v(a.textContent,b)},v:function(a,b){a=l.u(a,
b,K);return a=l.u(a,b,L)},u:function(a,b,c){return a.replace(c,function(a,c,f,h){a=f.replace(/["']/g,"");b&&(a=(new URL(a,b)).href);return c+"'"+a+"'"+h})},l:function(a,b){return a&&J.test(a)?a:(new URL(a,b)).href}},u={async:!0,load:function(a,b){var c=new XMLHttpRequest;n.C&&(a+="?"+Math.random());c.open("GET",a,u.async);c.addEventListener("readystatechange",function(){if(4===c.readyState){var a=void 0;try{var e=c.getResponseHeader("Location");e&&(a="/"===e.substr(0,1)?location.origin+e:e)}catch(f){console.error(f.message)}b(!u.B(c),
c.response||c.responseText,a)}});c.send();return c},B:function(a){return 200<=a.status&&300>a.status||304===a.status||0===a.status}};k.prototype.H=function(a){this.a+=a.length;for(var b=0,c=a.length,d;b<c&&(d=a[b]);b++)this.i(d);this.f()};k.prototype.G=function(a){this.a++;this.i(a);this.f()};k.prototype.i=function(a){var b=a.src||a.href;this.I(b,a)||this.F(b,a)};k.prototype.I=function(a,b){if(this.b[a])return this.b[a].push(b),!0;if(this.c[a])return this.h(a,b,this.c[a]),this.j(),!0;this.b[a]=[b];
return!1};k.prototype.F=function(a,b){var c=this;n.log&&console.log("fetch",a,b);if(a)if(a.match(/^data:/)){b=a.split(",");var d=b[1],d=-1<b[0].indexOf(";base64")?atob(d):decodeURIComponent(d);setTimeout(function(){return c.g(a,!1,d)},0)}else u.load(a,function(b,d,h){return c.g(a,b,d,h)});else setTimeout(function(){return c.g(a,!0,{error:"href must be specified"})},0)};k.prototype.g=function(a,b,c,d){this.c[a]=c;for(var e=this.b[a],f=0,h=e.length,g;f<h&&(g=e[f]);f++)this.h(a,g,c,b,d),this.j();this.b[a]=
null};k.prototype.j=function(){--this.a;this.f()};k.prototype.f=function(){this.a||this.D()};m.prototype.s=function(a){this.g.H(a.querySelectorAll("link[rel=import]"))};m.prototype.a=function(a,b,c,d,e){n.log&&console.log("loaded",a,b);if(q(b)){var f=this.c[a];if(void 0===f){if(d)d=null;else{d=e||a;e=document.createElement("import-content");e.setAttribute("import-href",d);e.style.display="none";e.innerHTML=c;c=e.querySelectorAll("script");for(var f=0,h=c.length,g;f<h&&(g=c[f]);f++)g.textContent&&
(g.textContent=g.textContent+("\n//# sourceURL="+d)),g.src&&g.setAttribute("src",l.l(g.getAttribute("src"),d));g=e.querySelectorAll("dom-module");for(c=0;c<g.length;c++)f=g[c],h=f.getAttribute("assetpath")||"",f.setAttribute("assetpath",l.l(h,d));g=e.querySelectorAll('link[rel=import],link[rel=stylesheet]:not([type]),style:not([type]),script:not([type]),script[type="application/javascript"],script[type="text/javascript"]');for(c=0;c<g.length;c++)f=g[c],f.href&&(f.href=new URL(f.getAttribute("href"),
d)),f.src&&(f.src=new URL(f.getAttribute("src"),d)),"style"==f.localName&&l.w(f,d);y(e,d);d=e}if(f=d)f.K=b,this.s(f);this.c[a]=f}b.J=f}};m.prototype.b=function(){this.f(document);G();this.h();this.i()};m.prototype.f=function(a){a=a.querySelectorAll("link[rel=import]");for(var b=0,c=a.length,d;b<c&&(d=a[b]);b++)d.import=this.c[d.href],d.import&&!d.import.A&&(d.import.A=d,this.f(d.import),d.appendChild(d.import))};m.prototype.h=function(){Promise.all(Array.prototype.slice.call(document.querySelectorAll('link[rel=import] style:not([type]),\n    link[rel=import] link[rel=stylesheet][href]:not([type]),\n    link[rel=import] script[src]:not([type]),\n    link[rel=import] script[src][type="application/javascript"],\n    link[rel=import] script[src][type="text/javascript"]')).map(p)).then(function(){for(var a=
document.querySelectorAll("link[rel=import]"),b=a.length-1,c;0<=b&&(c=a[b]);b--)if(!c.a){var d=c.import?"load":"error";n.log&&console.warn("fire",d,c.href);c.a=!0;c.dispatchEvent(new CustomEvent(d))}})};m.prototype.i=function(){var a=document.head;a.o||(a.o=new MutationObserver(this.j.bind(this)),a.o.observe(a,{childList:!0,subtree:!0}))};m.prototype.j=function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++)if(c.addedNodes)for(var d=0,e=c.addedNodes.length;d<e;d++)c.addedNodes[d]&&q(c.addedNodes[d])&&
this.g.G(c.addedNodes[d])};var x=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,F=["action","src","href","url","style"],z=/Trident/.test(navigator.userAgent),C=z?"complete":"interactive";if(t)(new MutationObserver(function(a){for(var b=0,c;b<a.length&&(c=a[b]);b++)if(c.addedNodes)for(var d=0,e=c.addedNodes.length;d<e;d++)q(c.addedNodes[d])&&
p(c.addedNodes[d])})).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var a=document.querySelectorAll("link[rel=import]"),b=0,c=a.length;b<c;b++)p(a[b])}();else{var D=function(){v=v||new m;v.s(document)},v;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?D():document.addEventListener("DOMContentLoaded",D)}A(function(a){document.dispatchEvent(new CustomEvent("HTMLImportsLoaded",{cancelable:!0,bubbles:!0,detail:a}))});
w.useNative=t;w.whenReady=A})(window.HTMLImports=window.HTMLImports||{});

//# sourceMappingURL=html-imports.min.js.map
